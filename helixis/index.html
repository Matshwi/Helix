<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title></title>
  <link rel="stylesheet" type="text/css" href="index.css">
  <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css'>
  <!--<link rel="stylesheet" type="text/css" href="bootstrap-4.0.0/bootstrap-4.0.0/dist/css/bootstrap.min.css">-->
 <!-- <link rel="stylesheet" type="text/css" href="bootstrap.min.css">-->
<link rel='stylesheet' href='https://unicons.iconscout.com/release/v3.0.6/css/line.css'>
<!--<link rel="stylesheet" type="text/css" href="unicons-master/unicons-master/css/thinline.css">-->
<!--<link rel="stylesheet" type="text/css" href="line.css">-->
<link rel="stylesheet" href="./style.css">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<style type="text/css">
  
  .nav-link{
    cursor: pointer;
  }

  .proimg{
    width: 60px !important;
    height: 60px !important;
  }

  .sidetext:hover{
    background: grey;
    color: white !important;
  }

  .fa-exclamation-circle{
    color: red;
  }

  .fa-bars{
    display: none;
  }


</style>
</head>
<body>
<!-- partial:index.partial.html -->
<aside class="sidebar position-fixed top-0 left-0 overflow-auto h-100 float-left" id="show-side-navigation1">
  

  <div class="search position-relative text-center px-4 py-3 mt-2">
    <span class="closenav" onclick="closenav()">close</span>
    <p class="sidebarname">
      <img class="proimg" src="man-g24ba357cd_1280.jpg">
      <p id="userheadname"></p>
  </div>

  <ul class="categories list-unstyled">
    <li class="sidetext">
      <i class="uil-estate fa-fw"></i><a href="#"> Dashboard</a>
    </li>
    <li class="sidetext" onclick="toappointments()">
      <i class="uil-calendar-alt"></i><a href="#"> Book Appointment</a>
    </li>
    <li class="sidetext" onclick="appointmentlist()">
      <i class="uil-file fa-fw"></i><a href="#"> Appointments</a>
    </li>
    <li class="sidetext" onclick="todoctors()">
      <i class="uil-comment-message"></i><a href="#"> Doctors</a>
    </li>
    <li class="sidetext" onclick="toprofile()">
      <i class="uil-file-medical"></i>
      <a href="#" class="profileitem">   
        Profile
      </a>
    </li>
    <li class="sidetext" onclick="toSupport()">
      <i class="uil-file-medical"></i><a href="#"> Support</a>
    </li>
    <li class="sidetext">
      <i class="uil-file-medical"></i><a href="#"> Logout</a>
    </li>
  </ul>
</aside>

<section id="wrapper">

   <span><i class="fa fa-bars"  onclick="openav()"></i></span>

  <nav class="navbar navbar-expand-md">
    <div class="container-fluid mx-2">
      <div class="navbar-header">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#toggle-navbar" aria-controls="toggle-navbar" aria-expanded="false" aria-label="Toggle navigation">
          <i class="uil-bars text-white"></i>
        </button>
        
      </div>
      <div class="collapse navbar-collapse" id="toggle-navbar">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link" >
              
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link"></a>
          </li>
          <li class="nav-item">
            <a class="nav-link"></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">
             
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="contained">
    <div class="">
      <div class="content rounded-3 p-3">
        <p class="mb-0"><span style="font-weight: lighter;"></span> </p>
      </div>
    </div>
    <div class="welcome">
      <div class="content rounded-2 p-3">
        <h6 class="fs-6">Personal information <div class="PIcross1">+</div></h6>
        <ul class="Personalinfo">
              <li>
                <i class="uil-calendar-alt" style="font-size: 1.2rem"></i><br> Date of birth 
                <br>
                <span style="font-size: .725rem" id="dob">
                </span>
              </li>
              <li>
                <i class="uil-map-marker" style="font-size: 1.2rem"></i><br>Address 
                <br>
                <span style="font-size: .725rem">34 Paul St,<br> Sunninghill
                </span>
              </li>
              <li class="eish">
                <i class="uil-compass" style="font-size: 1.2rem"></i><br>City, Province 
                <br>
                <span style="font-size: .725rem">Johannesburg, <br> Gauteng
                </span>
              </li>
              <li>
                <i class="uil-heart" style="font-size: 1.2rem"></i><br>Marital Status 
                <br>
                <span style="font-size: .725rem" id="MStatus"> Married
                </span>
              </li>
              <li>
                <i class="uil-user" style="font-size: 1.2rem"></i><br>ID Number 
                <br>
                <span style="font-size: .725rem" id="number">
                </span>
              </li>
              <li>
                <i class="uil-medical-drip" style="font-size: 1.2rem"></i><br>Medical Aid 
                <br>
                <span style="font-size: .725rem" id="medicalSP">
                </span>
              </li>
            </ul>
      </div>
    </div>


    <section class="charts mt-6 medistyle">
      <div class="row">
        <div class="col-lg-6 medico">
          <div class="chart-container medics p-3">
            <h3 class="fs-6 mb-3">Medications 
              <div class="PIcross">
                <i class="uil-edit-alt"></i>
              </div>
            </h3>
            
            <div class="medicontent">
              <div class="firstcont">
                <p style="font-size: .555rem;width: fit-content;margin-bottom: 0%;">6 Month Prescription</p>
                <p style="font-size: .700rem; font-weight: bold;width: fit-content;">Paxel</p>
              </div>
              <div class="linemed">
              </div>
              <div class="secondcont">
                <p style="font-size: .555rem;margin-bottom: 0%;">Pescribed by Dr McLeod</p>
                <p style="font-size: .700rem; font-weight: bold;width: fit-content;">Anti-Anxienty, Anti Stress</p>
              </div>
              <div class="thirdcont">
                <p style="color: blue;font-size: .700rem;margin-bottom: 0%;">3/6</p>
                <p style="font-size: .555rem;">Months</p>
              </div>
            </div>

            <p style="color: #9CA3AF;text-align: center;margin-top: 20px; margin-bottom: 0px;">see all</p>
          </div>
        </div>


        <div class="col-lg-6 medico MR" style="margin-top: 50px;">
          <div class="chart-container medics p-3">
            <h3 class="fs-6 mb-3">Medical Records 
              <div class="PIcross">
                <i class="uil-edit-alt"></i>
              </div>
            </h3>
            <div class="medireccontent">
              <div class="firstcont">
                <p style="font-size: .555rem;width: fit-content;margin-bottom: 0%;">Vaccination</p>
                <p style="font-size: .700rem; font-weight: bold;width: fit-content;">Pfizer (Seconde dose)</p>
              </div>
              <div class="linemedrec">
              </div>
              <div class="secondcontrec">
                <p style="font-size: .555rem;margin-bottom: 0%;width: fit-content;">Received at Dischem</p>
                <p style="font-size: .700rem; font-weight: bold;width: fit-content;">April 26, 2022</p>
              </div>
              <div class="thirdcont">
                <p class="MRcross">+</p>
              </div>
            </div>
            <p style="color: #9CA3AF;text-align: center;margin-top: 20px; margin-bottom: 0px;">see all</p>
          </div>
        </div>
      </div>
    </section>


    <section class="charts appoint">
      <div class="chart-container medics p-3 addon">
        <h3 class="fs-6 mb-3">Previous Appointments <span class="upcoming">Upcoming appointments</span><div class="PIcross">+</div></h3>
        <div class="appoints">
          
          <p style="color: #9CA3AF;text-align: center;margin-top: 20px; margin-bottom: 0px;">see all</p>
        </div>
      </div>
    </section>
  </div>
</section>
<!-- partial -->

<!-- TODO: Add SDKs for Firebase products that you want to use 

 https://firebase.google.com/docs/web/setup#available-libraries -->
  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
  <!--<script src="https://www.gstatic.com/firebasejs/8.9.1/firebase-analytics.js"></script>-->

<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>

<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-storage.js"></script>

<script type="text/javascript">

  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyAybUF58ye2xdEx5Cty63VQYf0aWjhfLjQ",
  authDomain: "helix-3ee55.firebaseapp.com",
  databaseURL: "https://helix-3ee55-default-rtdb.firebaseio.com/",
  projectId: "helix-3ee55",
  storageBucket: "helix-3ee55.appspot.com",
  messagingSenderId: "794490224146",
  appId: "1:794490224146:web:8313c7d926b0b91a6722cb"
};

   // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
 // firebase.analytics();
// Initialize variables
const auth = firebase.auth()
const database = firebase.database()
  
  function toappointments(){

    const queryString = window.location.search;
    console.log(queryString);
    const urlParams = new URLSearchParams(queryString);

    const useruid = urlParams.get('userid')
    const booknum = urlParams.get('booknum')

var appointmentname = Date.now();

if (booknum == null) {

  location.href = "activities.html" + queryString + "&booknum=" + appointmentname;
}else{

  location.href = "activities.html?userid=" + useruid + "&booknum=" + booknum;

}
  }

 function closenav() {
   document.querySelector(".sidebar").style.width = '0px';
   document.querySelector().style.display = "block";
 }

 function openav(){
  document.querySelector(".sidebar").style.width = '40%';
  document.querySelector(".fa-bars").style.display = 'nones';
 }


  function appointmentlist(){

    const queryString = window.location.search;
    console.log(queryString);
    const urlParams = new URLSearchParams(queryString);

    const useruid = urlParams.get('userid')
    const booknum = urlParams.get('booknum')
var appointmentname = Date.now();

if (booknum == null) {

  location.href = "appointments.html?userid=" + useruid;
}else{

  location.href = "appointments.html?userid=" + useruid + "&booknum=" + booknum;

}

  
  }

  const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);

    const booknum = urlParams.get('booknum')
    const useruid = urlParams.get('userid')


firebase.database().ref("Appoiments/doctor/" + useruid).on("value",function(element){

  element.forEach(function(snaps){


      var dater = snaps.val();
    var todate = dater.date;


console.log(snaps.val());

        var specialty = snaps.val().Specialty;
        var fullName = snaps.val().Name + " " + snaps.val().Surname;

     
     document.querySelector('.appoints').innerHTML += `<div class="appointmentcontent">
            <p style="font-size: .555rem;width: fit-content;margin-bottom: -1%;">${specialty}</p>
            <span style="font-size: .700rem; font-weight: bold;width: fit-content;">Dr ${fullName}</span>
            <div class="line"></div>
            <div class="titletime">
              <p style="font-size: .555rem;width: fit-content;margin-bottom: 0%;">Consultation</p>
            <p style="font-size: .700rem; font-weight: bold;width: fit-content;">${todate}, 10am - 11:30am</p>
          </div>
            <ul class="action">
            <li>
              <div>
                <span class="callicon">
                  <i class="uil-phone"></i>
                </span>
              <p class="texts">call
              </p>
            </div>
            </li>

            <li>
              <div>
              <span class="Messages">
                <i class="uil-chat-info"></i>
              </span>
              <p class="texts">Messages
              </p>
              </div>
            </li>

            <li>
              <div>
              <span class="Cancel">
                <i class="uil-multiply"></i>
              </span>
              <p class="texts">Cancel
              </p>
              </div>
            </li>
            </ul>
          </div>`;

        
           })

        });



  


firebase.database().ref("Patient/" + useruid).on("value",function(element){

  var data = element.val();

  var name = data.First_Name;
  var surname = data.Last_name;
  var imager = data.Logo;

  var idNumber = data.IDnumber;
  var medicalSP = data.Medical;

document.getElementById("userheadname").innerHTML = name + " " + surname;

document.querySelector(".proimg").src = imager;

document.getElementById("number").innerHTML = idNumber;

document.querySelector("#medicalSP").innerHTML = medicalSP;


    var numstr = idNumber.toString();

   var Year = numstr.substring(0, 2);
   var Month = numstr.substring(2, 4);
   var Day = numstr.substring(4, 6);
   
   var cutoff = (new Date()).getFullYear() - 2000
   
   var dob = (Year > cutoff ? '19' : '20') + Year + '/' + Month + '/' + Day;

   document.getElementById("dob").innerHTML = dob;

})


firebase.database().ref("Patient/" + useruid).on("value",function(element){

  console.log(element.val().Addres);

  document.querySelector("#MStatus").innerHTML = element.val().Marital;

if (element.val().Address == undefined) {

  var exclamation = `<i class="fa fa-exclamation-circle" aria-hidden="true"></i>`;


  document.querySelector(".profileitem").innerHTML = "Profile" + " " +exclamation;
}else{
  document.querySelector(".profileitem").innerHTML = "Profile";

}

})

console.log(booknum);


function todoctors(){

    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);

    const booknum = urlParams.get('booknum')
    const useruid = urlParams.get('userid')


    if (booknum == null) {

   location.href = "doctors.html?userid=" + useruid;
}else{

location.href = "doctors.html?userid=" + useruid + "booknum=" + booknum;

}


  }


  function toprofile(){

    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);

    const booknum = urlParams.get('booknum')
    const useruid = urlParams.get('userid')

    

    if (booknum == null) {

  location.href = "profile.html?userid=" + useruid;
}else{

  location.href = "profile.html?userid=" + useruid + "&booknum=" + booknum;

}


  }
  function toSupport(){

    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);

    const booknum = urlParams.get('booknum')
    const useruid = urlParams.get('userid')

    

    if (booknum == null) {

  location.href = "support.html?userid=" + useruid;
}else{

  location.href = "support.html?userid=" + useruid + "&booknum=" + booknum;

}
  }


</script>

  <script src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.bundle.js'></script>
<script src='https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.jshttps://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js'></script><script  src="./script.js"></script>

</body>
</html>
