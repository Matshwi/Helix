<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title></title>
  <link rel="stylesheet" type="text/css" href="doctors.css">
  <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css'>
  <!--<link rel="stylesheet" type="text/css" href="bootstrap-4.0.0/bootstrap-4.0.0/dist/css/bootstrap.min.css">-->
 <!-- <link rel="stylesheet" type="text/css" href="bootstrap.min.css">-->
<link rel='stylesheet' href='https://unicons.iconscout.com/release/v3.0.6/css/line.css'>
<!--<link rel="stylesheet" type="text/css" href="unicons-master/unicons-master/css/thinline.css">-->
<!--<link rel="stylesheet" type="text/css" href="line.css">-->
<link rel="stylesheet" href="./style.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


<style type="text/css">
  
  .text {
  margin-top: .5rem;
  font-size: .755rem;
  }

  .headertext {
    margin-top: 10%;
    margin-left: 14%;
    font-weight: bold;
  }

  .docitems{
    margin-left: 40rem;
    list-style: none;
    display: flex;
    margin-top: -4rem;
    cursor: pointer;
}

.nav-item{
  cursor: pointer;
}

a.nav-link:hover{
  color: #597199 !important;
}

.navbar .navbar-nav>li>a:hover {
    color: #597199 !important;
}

.appoint{
  margin-top: 5%;
  margin-left: 5%;
}

</style>
</head>
<body>
<!-- partial:index.partial.html -->

  <div><p class="name">Name</p></div>
    
  

<section id="wrapper" style="margin-left: 0px !important;">
  <nav class="navbar navbar-expand-md">
    <div class="container-fluid mx-2">
      <div class="collapse navbar-collapse" id="toggle-navbar">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item" onclick="Dashboard()">
            <a class="nav-link">
              Dashboard
            </a>
          </li>
          <li class="nav-item" onclick="toSupport()">
            <a class="nav-link">Support</a>
          </li>
          <li class="nav-item" onclick="toprofile()">
            <a class="nav-link">Account</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">
              <img class="proimg" src="man-g24ba357cd_1280.jpg">
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="p-4">
    <div class="">
      <div class="headertext">
        <p>All Doctors</p>
      </div>
    </div>
    <div class="appoint">
      
    </div>
  </div>
</section>
<!-- partial -->
  <script src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.bundle.js'></script>
<script src='https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.jshttps://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js'></script><script  src="./script.js"></script>


<!-- TODO: Add SDKs for Firebase products that you want to use 

 https://firebase.google.com/docs/web/setup#available-libraries -->
  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
  <!--<script src="https://www.gstatic.com/firebasejs/8.9.1/firebase-analytics.js"></script>-->

<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>

<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-storage.js"></script>

<script type="text/javascript">
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyAybUF58ye2xdEx5Cty63VQYf0aWjhfLjQ",
  authDomain: "helix-3ee55.firebaseapp.com",
  databaseURL: "https://helix-3ee55-default-rtdb.firebaseio.com/",
  projectId: "helix-3ee55",
  storageBucket: "helix-3ee55.appspot.com",
  messagingSenderId: "794490224146",
  appId: "1:794490224146:web:8313c7d926b0b91a6722cb"
  };



// Initialize Firebase
firebase.initializeApp(firebaseConfig);
// Initialize variables
const auth = firebase.auth()
const database = firebase.database()
  
  function call(){
    location.href="tel:082 487 5987";
  }

  const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);

    const booknum = urlParams.get('booknum')
    const useruid = urlParams.get('userid')

    if (booknum == null) {

      const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);

    const booknum = urlParams.get('booknum')
    const useruid = urlParams.get('userid')


      firebase.database().ref("Appoiments/doctor/" + useruid).on("value",function(docval){

        var datakey = Object.keys(docval.val());

        for (var i = 0; i < datakey.length; i++) {
          
        console.log(datakey[i]);

        var datakey = Object.keys(docval.val());

firebase.database().ref("Doctors/" + datakey[i]).on("value",function(docdata){

  var test = docdata.val();

  console.log(test);

  var mailtoken = docdata.val().Email;

  var docid = docdata.val().IDnumber;

    var specialty = docdata.val().Specialty;
var Fname = docdata.val().First_Name + " " + docdata.val().Last_name;
    var hospital = docdata.val().hospital;




    document.querySelector(".appoint").innerHTML += `<div class="welcome doclist">
      <div style="background: rgba(255, 255, 255, .5) !important;" class="content doccontainer medics">
        <ul class="doctor">
              <li style="font-weight: bold;">
                Dr ${Fname}
              </li>
              <li style="font-size: 13px;">
                ${specialty}
              </li>
              <li style="font-size: 13px;">
                ${hospital}
              </li>
            </ul>
            <ul class="docitems">
              <li onclick="call()">
                <i class="fa fa-phone" aria-hidden="true"></i>
                <p class="text">call</p>
              </li>
              <li onclick="chats('${docid}')">
                <i class="fa fa-comments" aria-hidden="true"></i>
                <p class="text">message</p>
              </li>
              <li onclick="docinfo('${mailtoken}')">
                <i class="fa fa-info-circle" aria-hidden="true"></i>
                <p class="text">more info</p>
              </li>
            </ul>
      </div>
    </div>`;
  })
}
})


    }else{

  firebase.database().ref("Appoiments/doctor/" + useruid + "/" + booknum).on("value",function(docval){

    console.log(docval.val());

  })
  }

  function docinfo(arg) {

    const queryString = window.location.search;
    console.log(queryString);
    const urlParams = new URLSearchParams(queryString);

    const useruid = urlParams.get('userid')
    const booknum = urlParams.get('booknum')

    if (booknum == null) {
         location.href = "doctor.html?doci=" + arg + "&userid=" + useruid;
    }else{
         location.href = "doctor.html?doci=" + arg + "&booknum=" +booknum + "&userid=" + useruid;
    }
    
  }

  function Dashboard(){

    const queryString = window.location.search;
    console.log(queryString);
    const urlParams = new URLSearchParams(queryString);

    const useruid = urlParams.get('userid')
    const booknum = urlParams.get('booknum')


if (booknum == null) {

  location.href = "index.html?userid=" + useruid;
}else{

  location.href = "activities.html?userid=" + useruid + "&booknum=" + booknum;

}
  }

  function toSupport(){

    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);

    const booknum = urlParams.get('booknum')
    const useruid = urlParams.get('userid')

    

    if (booknum == null) {

  location.href = "support.html?userid=" + useruid;
}else{

  location.href = "support.html?userid=" + useruid + "&booknum=" + booknum;

}
  }


  function toprofile(){

    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);

    const booknum = urlParams.get('booknum')
    const useruid = urlParams.get('userid')

    

    if (booknum == null) {

  location.href = "profile.html?userid=" + useruid;
}else{

  location.href = "profile.html?userid=" + useruid + "&booknum=" + booknum;

}


  }


  firebase.database().ref("Patient/" + useruid).on("value",function(element){

  var data = element.val();

  var name = data.First_Name;
  var surname = data.Last_name;
  var imager = data.Logo;



document.querySelector(".name").innerHTML = name + " " + surname;

document.querySelector(".proimg").src = imager;

})

function cancel(getval){

  const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);

    const booknum = urlParams.get('booknum')
    const useruid = urlParams.get('userid')



firebase.database().ref("Doctors").remove();

window.location.reload();

}

function chats(arg) {
  const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);

    const booknum = urlParams.get('booknum');
    const useruid = urlParams.get('userid');


  location.href = "chats.html?userid=" + useruid + "&docmail=" + arg;
}


</script>

</body>
</html>
